<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Claudium</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://kit.fontawesome.com/cdf8a73b8c.js" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="css/style.css">
 

</head>

<body class="body_favoritos">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>


   
  <!--Inicio Nav-->
  <nav class="navbar navbar-dark stick-top p-3">

    <div class="container-fluid">

      <!--barra-->
      <button src class="navbar-toggler" style="background-color: #33a3ff54" type="button" data-bs-toggle="offcanvas"
        data-bs-target="#offcanvasDarkNavbar" aria-controls="offcanvasDarkNavbar" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <!--imagem-->
      <a class="navbar-brand text-primary" id="btn-perfil" type="button" style="align-content: center;"
        href="login_signup.html">
        <i class="fa-solid fa-user"></i> Entrar
      </a>

      <div class="offcanvas offcanvas-start text-bg-dark bg-primary" tabindex="-1" id="offcanvasDarkNavbar"
        aria-labelledby="offcanvasDarkNavbarLabel">
        <div class="offcanvas-header">
          <h3 class="offcanvas-title p-2" id="offcanvasDarkNavbarLabel">Claudium</h3>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas"
            aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">

          <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="index.html"> <i class="fa-solid fa-house"></i> Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="local.html"><i class="fa-solid fa-location-dot"></i>
                Localização</a>
            </li>

            <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
              <li class="nav-item">
                <a class="nav-link" aria-current="page" href="favoritos.html"> <i class="fa-solid fa-heart"></i>
                  Favoritos</a>
              </li>

              <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
                <li class="nav-item">
                  <a class="nav-link active" aria-current="page" href="radar.html"> <i
                      class="fa-solid fa-earth-americas"></i>
                    Radar Meteriológico</a>
                </li>

                <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
                  <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="alertas.html"> <i class="fa-solid fa-bell"></i>
                      Alertas</a>
                  </li>



        </div>

        <div class="p-4">
          <hr id="hr_nav">

          <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="perfil.html#configuracoes"> <i
                  class="fa-solid fa-gear"></i>
                Preferências</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="admin.html"> <i class="fa-solid fa-wrench"></i>
                Página do admin</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="suporte.html"><i class="fa-solid fa-comments"></i>
                Fale conosco</a>
            </li>
          </ul>
        </div>

        <br><br>

        <p class="container-fluid p-4" id="nav_copy">&copy;2024 Cloudium | All Rights Reserved</p>
      </div>
    </div>

  </nav>

  <!--fim nav-->


    <br><br>

    <div class="container" id="container">
        <aside class="aside_index">
            <div class="container-fluid p-5">
                <div id="clima_api">
                    <form id="search" action="">
                        <i class="fa-solid fa-location-crosshairs"></i>
                        <input type="search" name="city_name" id="city_name" placeholder="Buscar cidade">
                        <button type="submit">
                            <i class="fa-solid fa-magnifying-glass"></i>
                        </button>
                    </form>

                    <div id="weather">
                        <h1 id="title">São Bernardo, BR</h1>
                        <br>
                        <div id="infos">
                            <div id="temp">
                                <img id="temp_img" src="img/moon.png" alt="">
                                <div>
                                    <p id="temp_value">6 <sup>°C</sup></p>
                                    <p id="temp_description">Céu limpo</p>
                                </div>
                            </div>

                            <div id="other_infos">
                                <div class="info">
                                    <i id="temp_max_icon" class="fa-solid fa-temperature-high"></i>
                                    <div>
                                        <h2>Temp. max</h2>
                                        <p id="temp_max">10 <sup>°C</sup></p>
                                    </div>
                                </div>

                                <div class="info">
                                    <i id="temp_min_icon" class="fa-solid fa-temperature-low"></i>
                                    <div>
                                        <h2>Temp. min</h2>
                                        <p id="temp_min">5 <sup>°C</sup></p>
                                    </div>
                                </div>

                                <div class="info">
                                    <i id="humidity_icon" class="fa-solid fa-droplet"></i>
                                    <div>
                                        <h2>Humidade</h2>
                                        <p id="humidity">30%</p>
                                    </div>
                                </div>

                                <div class="info">
                                    <i id="wind_icon" class="fa-solid fa-wind"></i>
                                    <div>
                                        <h2>Vento</h2>
                                        <p id="wind">50 km/hr</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <br><br>

                        <div id="alert"></div>
                        <center><button id="addToFavorites">Adicionar aos Favoritos</button></center>
                    </div>

                    <br><br>

                    <div id="favoritesList">
                        <h2>Cidades Favoritas</h2>
                    </div>
                </div>
            </div>
        </aside>
    </div>

    <script>
        document.querySelector('#search').addEventListener('submit', async (event) => {
            event.preventDefault();

            const cityName = document.querySelector('#city_name').value;

            if (!cityName) {
                document.querySelector("#weather").classList.remove('show');
                showAlert('Você precisa digitar uma cidade...');
                return;
            }

            const apiKey = '8a60b2de14f7a17c7a11706b2cfcd87c';
            const apiUrl = `https://api.openweathermap.org/data/2.5/weather?q=${encodeURI(cityName)}&appid=${apiKey}&units=metric&lang=pt_br`;

            const results = await fetch(apiUrl);
            const json = await results.json();

            if (json.cod === 200) {
                showInfo({
                    city: json.name,
                    country: json.sys.country,
                    temp: json.main.temp,
                    tempMax: json.main.temp_max,
                    tempMin: json.main.temp_min,
                    description: json.weather[0].description,
                    tempIcon: json.weather[0].icon,
                    windSpeed: json.wind.speed,
                    humidity: json.main.humidity,
                });
            } else {
                document.querySelector("#weather").classList.remove('show');
                showAlert(`Não foi possível localizar...<img src="src/images/404.svg"/>`);
            }
        });

        function showInfo(json) {
            showAlert('');

            document.querySelector("#weather").classList.add('show');

            document.querySelector('#title').innerHTML = `${json.city}, ${json.country}`;
            document.querySelector('#temp_value').innerHTML = `${json.temp.toFixed(1).toString().replace('.', ',')} <sup>°C</sup>`;
            document.querySelector('#temp_description').innerHTML = `${json.description}`;
            document.querySelector('#temp_img').setAttribute('src', `https://openweathermap.org/img/wn/${json.tempIcon}@2x.png`);
            document.querySelector('#temp_max').innerHTML = `${json.tempMax.toFixed(1).toString().replace('.', ',')} <sup>°C</sup>`;
            document.querySelector('#temp_min').innerHTML = `${json.tempMin.toFixed(1).toString().replace('.', ',')} <sup>°C</sup>`;
            document.querySelector('#humidity').innerHTML = `${json.humidity}%`;
            document.querySelector('#wind').innerHTML = `${json.windSpeed.toFixed(1)} km/h`;
        }

        function showAlert(msg) {
            document.querySelector('#alert').innerHTML = msg;
        }

        document.querySelector('#addToFavorites').addEventListener('click', () => {
            const cityName = document.querySelector('#title').innerText;

            if (cityName) {
                addToFavorites(cityName, document.querySelector('#temp_value').innerText, document.querySelector('#humidity').innerText, document.querySelector('#wind').innerText);
            }
        });

        function addToFavorites(city, temp, humidity, wind) {
            const cityCard = document.createElement('div');
            cityCard.className = 'city-card';
            cityCard.innerHTML = `
            <h3>${city}</h3>
            <p>Temperatura: ${temp}</p>
            <p>Humidade: ${humidity}</p>
            <p>Vento: ${wind}</p>
            <button onclick="removeCity(this)">Remover</button>
          `;

            document.getElementById('favoritesList').appendChild(cityCard);
        }

        function removeCity(button) {
            const cityCard = button.parentElement;
            cityCard.remove();
        }
    </script>



    <br><br>

    
  <!--Footer Universal-->

  <footer class="footer_uni">
    <div class="row col">
      <div class="waves">
        <div class="wave" id="wave1"></div>
        <div class="wave" id="wave2"></div>
        <div class="wave" id="wave3"></div>
        <div class="wave" id="wave4"></div>
      </div>
      <ul class="menu">
        <li class="menu__item"><a class="menu__link" href="index.html"><i class="fa-solid fa-house"></i> Home</a></li>
        <li class="menu__item"><a class="menu__link" href="suporte.html"><i class="fa-solid fa-comments"></i> Fale conosco</a></li>

      </ul>
    </div>
    <p>&copy;2024 Cloudium | All Rights Reserved</p>

  </footer>

  <!-- Botão Voltar ao Topo -->
  <button onclick="topFunction()" id="backToTopBtn" title="Voltar ao topo">
    <i class="fa-solid fa-arrow-up"></i>
  </button>
      <script>
        // Obtém o botão
        var mybutton = document.getElementById("backToTopBtn");

        // Quando o usuário rolar para baixo 20px do topo da página, mostra o botão
        window.onscroll = function () {
          if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
            mybutton.style.display = "block";
          } else {
            mybutton.style.display = "none";
          }
        };

        // Quando o usuário clicar no botão, rola para o topo da página
        function topFunction() {
          document.body.scrollTop = 0; // Para Safari
          document.documentElement.scrollTop = 0; // Para Chrome, Firefox, IE e Opera
        }
      </script>


  <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>


  <script src="js/sript_weather.js"></script>
</body>

</html>